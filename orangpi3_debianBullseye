"""""""""""""""""
1) Install Operating System for Orange pi 3 
"""""""""""""""""
1.1) Download and install Debian Bullseye Imager to your laptop here: https://drive.google.com/drive/folders/1ctuKgHNN9r517tiAv9GGGaR7UYQgZiXP
- Download balenaEtcher to your latop here : https://www.balena.io/etcher/
- Insert SD card (32 GB, 64 GB, 128 GB ) into your laptop
- Open balenaEtcher, click flash from flie
- Choose Debian Pi Imager which downloaded 
- Select SD card
- Flash 
2) Initialize operating system and source code
"""""""""""""""""
2.1) Install setting for Debian system :
- Run the commnad "passwd" to change password, Enter password default(orangepi) in line "Current password", then set New password to "12345678"
- Run command "timedatectl list-timezones" to list all available time zones
- Identify which time zone is accurate to your location, run the command "sudo timedatectl set-timezone your_time_zone" 
- For example, to change the system’s timezone to Asia/Ho_Chi_Minh , you would run : "sudo timedatectl set-timezone Asia/Ho_Chi_Minh"
2.2) Download code: Open "Terminal Emulator" and run those commands (don't type, copy paste):
cd ~
sudo apt update

"""""""""
//if git not installed, run following commnad:
sudo apt install git
"""""""""

git clone https://github.com/SontranBK/pi_card_reader 
"""""""""""""""""
3) Open "Terminal Emulator" and run those command to install dependencies:
// You can copy paste those commands instead of typing

cd ~
sudo apt install -y python3-pip
cd ~
sudo pip install pyserial
cd ~
sudo python3 -m pip install firebase-admin
cd ~
sudo apt-get install python3-tk
cd ~
sudo apt remove brltty
cd ~
sudo apt update
sudo apt install -y jq
jq --version
cd ~
sudo apt-get install minicom
sudo minicom -s

""""""""""""""""""
""""""""""""""""""
- Run minicom with sudo minicom -s, go to "Serial port setup" 
- Change the first line to /dev/ttyUSB0.
- Save config as default with "Save setup as dfl". 
- Restart your Pi
""""""""""""""""""
""""""""""""""""""
### (DO NOT RUN 4 FOLLOWING COMMAND)
### sudo dmesg | grep -i USB
### sudo lsusb -t
### sudo udevadm monitor -u
### sudo apt-get install linux-image-extra-virtual

### For AB Circle reader, run:
sudo apt-get install swig
sudo apt-get install build-essential libssl-dev libffi-dev python3-dev
sudo apt install libpcsclite-dev
sudo python3 -m pip install pyscard
//support pyscard
yaourt -S aur/acsccid
sudo systemctl enable pcscd.service
sudo systemctl start pcscd.service 
sudo systemctl status pcscd.service


### To install flutter
cd ~
sudo snap install flutter --classic
flutter --version
if there is issue with "flutter command not found" , you install flutter by
"""""""""""""""""""
cd ~
git clone https://github.com/flutter/flutter.git
cd flutter/
pwd  # /home/orangepi/flutter
export PATH="/home/orangepi/flutter/bin":$PATH
"""""""""""""""""""
cd ~
flutter --version
cd ~
cd pi_card_reader/
flutter config --enable-web
flutter create --platforms=web .
cd ~
sh pi_card_reader/Tools_And_Docs/Logo_School_Tool/update_logo_school.sh

"""""""""""""""""
4) Make system auto-boot and auto-config 
"""""""""""""""""
4.1) Click "Application",click "Settings" and click "Session and Startup ", open "Application Autostart" then click "Add", then set:
- Name: terminal
- Command: click "browser", then find following path: "/user/bin/x-terminal-emulator.real"

now right-click Terminal-Emulator and open Preferences:
- Open "Profiles", open "Command"
- Choose both "Run command as a login shell" and "Run custom command instead of my shell"
- Add line "sh ./pi_card_reader/Bash_Script/auto_boot.sh" to Custom command

4.2) Click "Application", click "Settings", open "Settings Manager", click "Screensaver", then open "Display Modes", change Mode to "Disable Screen Saver" 
4.3) To turn off automatically software update
- Click "Application", click "Settings"
- Open up the “Software & Updates” utility.
- Head over to the “Updates” tab 
- Change the “Automatically check for updates” option to never
- Remove choose "Recommended update(bullseye-update)"
- Close
4.4) Hide Download Bar in firefox
- Open firefox
- Right-click symbol "Downloads", click remove from ToolBar
- Type about:config to the address bar, click to the "Accept the Risk and Continue"
- Search "download"
- Change "browser.download.improvenment_to_dowload_panel" to "true"
- Change "browser.download.forbid_open_with" to "true"
- Click "Menu" Button, open "Settings" , search "Downloads"
- Choose "Save files to", Browser "Downloads"
- In "Application", find content type "WebIP Image", "Scalable Vector Graphics(SVG)", "PNG Image" change action to "Save file"
- Scroll down find "Deceptive Content and Dangerous Software Protection", remove choose Block dangerous and deceptive content"

"""""""""""""""""
5) Change the apperance of Debian, make our product commercialized  
"""""""""""""""""
5.1) Bootup apperance: Install plymouth with following command:

cd ~
sudo apt install plymouth-themes
cd ~
sudo cp pi_card_reader/Ubuntu_Bootup_Modification/bgrt-fallback.png /usr/share/plymouth/themes/spinner
cd ~
sudo cp pi_card_reader/Ubuntu_Bootup_Modification/watermark.png /usr/share/plymouth/themes/spinner
reboot

"""""""""""""""""
1) Install Operating System (Hệ điều hành) for Orange pi 3 
"""""""""""""""""
1.1) Download and install Debian Imager to your laptop here: https://drive.google.com/drive/folders/1ctuKgHNN9r517tiAv9GGGaR7UYQgZiXP
- Download balenaEtcher to your latop here : https://www.balena.io/etcher/
- Insert SD card (32 GB, 64 GB, 128GB ) into your laptop
- Open balenaEtcher, click flash from flie
- Choose Debian Pi Imager which downloaded 
- Select SD card
- Flash 
2) Initialize operating system and source code
"""""""""""""""""
2.1) Install setting for Debian system :
- Run command "timedatectl list-timezones" to list all available time zones
- Identify which time zone is accurate to your location, run the command "sudo timedatectl set-timezone your_time_zone" 
- For example, to change the system’s timezone to Asia/Ho_Chi_Minh , you would run: "sudo timedatectl set-timezone Asia/Ho_Chi_Minh"
2.2) Download code: Open "Terminal Emulator" and run those commands (don't type, copy paste):
cd ~
sudo apt update
sudo apt install git
git clone https://github.com/SontranBK/pi_card_reader 
"""""""""""""""""
3) Open "Terminal Emulator" and run those command to install dependencies:
// You can copy paste those commands instead of typing

cd ~
sudo apt install chromium
cd ~
sudo apt install -y python3-pip
cd ~
sudo pip install pyserial
cd ~
sudo python3 -m pip install firebase-admin
cd ~
sudo apt-get install python3-tk
cd ~
sudo apt remove brltty
cd ~
sudo apt update
sudo apt install -y jq
jq --version
cd ~
sudo apt-get install minicom
sudo minicom -s

""""""""""""""""""
""""""""""""""""""
- Run minicom with sudo minicom -s, go to "Serial port setup" 
- Change the first line to /dev/ttyUSB0.
- Save config as default with "Save setup as dfl". 
- Restart your Pi
""""""""""""""""""
""""""""""""""""""
### (DO NOT RUN 4 FOLLOWING COMMAND)
### sudo dmesg | grep -i USB
### sudo lsusb -t
### sudo udevadm monitor -u
### sudo apt-get install linux-image-extra-virtual

### For AB Circle reader, run:
sudo apt-get install swig
sudo apt-get install build-essential libssl-dev libffi-dev python3-dev
sudo apt install libpcsclite-dev
sudo python3 -m pip install pyscard
//support pyscard
yaourt -S aur/acsccid
sudo systemctl enable pcscd.service
sudo systemctl start pcscd.service 
sudo systemctl status pcscd.service
//support pyscard

### To install flutter
cd ~
sudo snap install flutter --classic
flutter --version
if there is issue with "flutter command not found" , you install flutter by
"""""""""""""""""""
cd ~
git clone https://github.com/flutter/flutter.git
cd flutter/
pwd  # /home/orangepi/flutter
export PATH="/home/orangepi/flutter/bin":$PATH
"""""""""""""""""""
cd ~
flutter --version
cd ~
cd pi_card_reader/
flutter config --enable-web
flutter create --platforms=web .
cd ~
sh pi_card_reader/Tools_And_Docs/Logo_School_Tool/update_logo_school.sh

"""""""""""""""""
4) Make system auto-boot and auto-config 
"""""""""""""""""
4.1) Click "Application",click "Settings" and click "Session and Startup ", open "Application Autostart" then click "Add", then set:
- Name: terminal
- Command: click "browser", then find following path: "/user/bin/x-terminal-emulator.real"

now right-click Terminal-Emulator and open Preferences:
- Open "Profiles", open "Command"
- Choose both "Run command as a login shell" and "Run custom command instead of my shell"
- Add line "sh ./pi_card_reader/Bash_Script/auto_boot.sh" to Custom command
4.2) Install "Autohide Downloads Bar" extension for chromium here (https://chrome.google.com/webstore/detail/autohide-downloads-bar/iaefpjibipfaofmigecedfapfgplmplo)
and set "Delay Timer" of this extension to 0.

4.3) Open Chromium and open link (chrome://settings/content/notifications), in "Allowed to send notifications" part, add 5 link: 
http://localhost:41200
http://localhost:41201
http://localhost:41202
http://localhost:41203
http://localhost:41204
http://localhost:41205

4.4) Open Chromium and open link (chrome://settings/content/automaticDownloads), add 5 link: 
http://localhost:41200
http://localhost:41201
http://localhost:41202
http://localhost:41203
http://localhost:41204
http://localhost:41205

4.5) Go to Setting (of Ubuntu) => Appearance => Enable "Auto-hide the Dock"
4.6) Go to Setting (of Ubuntu) => Power => Power Saving Options => Change to "Never" 
(Make Ubuntu never goes to "sleep" mode)

4.7) Install virtual keyboard on device (screen keyboard)

- Open Setting on Ubuntu
- Choose Accessibility
- In Typing section -> Turn "Screen Keyboard" to "on" 

4.8) To turn off automatically software update

https://askubuntu.com/questions/1139545/how-do-i-utterly-stop-automatic-update-checks-in-ubuntu-19-04
https://linuxnightly.com/how-to-disable-automatic-updates-in-ubuntu/

- First, open up the “Software & Updates” utility.
- Head over to the “updates” tab 
- Change the “Automatically check for updates” option to never
- Change the "Notify me of a new ubuntu version" option to never

"""""""""""""""""
5) Change the apperance of Ubuntu, make our product commercialized  
"""""""""""""""""
5.1) Bootup apperance: Install plymouth with following command:

cd ~
sudo apt install plymouth-themes
cd ~
sudo cp pi_card_reader/Ubuntu_Bootup_Modification/bgrt-fallback.png /usr/share/plymouth/themes/spinner
cd ~
sudo cp pi_card_reader/Ubuntu_Bootup_Modification/watermark.png /usr/share/plymouth/themes/spinner
reboot
